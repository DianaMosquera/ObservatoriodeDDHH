<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Observatorio de Derechos Humanos Ecuador - Documentaci√≥n del Paro Nacional 2025">
    <meta name="keywords" content="derechos humanos, Ecuador, paro nacional, CONAIE, CEDHU">
    <meta property="og:title" content="Observatorio DDHH Ecuador">
    <meta property="og:description" content="Documentaci√≥n interactiva de vulneraciones a derechos humanos durante el Paro Nacional Ecuador 2025">
    <meta property="og:type" content="website">
    <title>Observatorio DDHH Ecuador - Paro Nacional 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Fraunces:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* PALETA DE COLORES NUEVA: Inspirada en Pudding + DataG√©nero + Polygraph */
        :root {
            /* Colores Base - Modernos y profesionales (DataG√©nero) */
            --primary-900: #101828;
            --primary-700: #1D2939;
            --primary-500: #475467;
            --primary-300: #98A2B3;
            --primary-100: #F9FAFB;

            /* Compatibilidad con c√≥digo anterior */
            --color-primary: #2C5F8D;
            --color-primary-light: #4A7BA7;
            --color-secondary: #7D8F69;
            --color-bg: #F9FAFB;
            --color-bg-alt: #FFFFFF;
            --color-dark: #101828;
            --color-dark-light: #475467;
            --color-accent: #8B6F9E;
            --color-danger: #D64545;
            --color-warning: #E8983D;
            --color-success: #5B9A7C;

            /* Colores por Categor√≠a - Vibrantes (Pudding) */
            --cat-anuncio: hsl(204, 70%, 53%);
            --cat-detenciones: hsl(46, 96%, 53%);
            --cat-represion: hsl(348, 83%, 47%);
            --cat-violencia: hsl(14, 77%, 62%);
            --cat-censura: hsl(272, 43%, 50%);

            /* Gradientes Modernos (DataG√©nero) */
            --gradient-hero: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-accent: linear-gradient(120deg, #f093fb 0%, #f5576c 100%);

            /* Sombras mejoradas (Polygraph) */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);

            /* Radios */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;

            /* Transiciones mejoradas */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);

            /* Tipograf√≠a */
            --font-display: 'Fraunces', Georgia, serif;
            --font-body: 'Inter', 'Helvetica Neue', sans-serif;
            --font-mono: 'JetBrains Mono', 'Courier New', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--color-bg);
            color: var(--color-dark);
            line-height: 1.7;
            overflow-x: hidden;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4 {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            color: var(--color-dark);
            line-height: 1.3;
        }

        /* Barra de Progreso y Navegaci√≥n */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            z-index: 10000;
            transition: width 0.1s linear;
            box-shadow: 0 2px 8px rgba(44, 95, 141, 0.3);
        }

        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 9999;
            padding: 1.25rem 2.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: var(--shadow-sm);
            opacity: 0;
            transform: translateY(-100%);
            transition: var(--transition);
        }

        .nav.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-family: 'Fraunces', serif;
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--color-primary);
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav-link {
            font-size: 0.925rem;
            color: var(--color-dark-light);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--color-primary);
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--color-primary);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Secci√≥n Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            background: var(--gradient-hero);
            position: relative;
            padding: 8rem 2rem 6rem;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(139, 111, 158, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(74, 123, 167, 0.15) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content {
            max-width: 1100px;
            margin: 0 auto;
            color: white;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-label {
            display: inline-block;
            font-size: 0.825rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 2rem;
            padding: 0.5rem 1.25rem;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 2rem;
            letter-spacing: -1px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }

        .hero-desc {
            font-size: 1.15rem;
            line-height: 1.6;
            max-width: 750px;
            opacity: 0.9;
            margin-bottom: 4.5rem;
            font-weight: 400;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 2rem;
            max-width: 1200px;
        }

        .stat {
            text-align: left;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: var(--transition);
        }

        .stat:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .stat-num {
            font-size: 3rem;
            font-weight: 600;
            line-height: 1;
            font-family: var(--font-body);
            margin-bottom: 0.75rem;
            color: white;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .scroll-hint {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            opacity: 0.8;
            font-size: 0.85rem;
            text-align: center;
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
            transition: var(--transition);
        }

        .scroll-hint:hover {
            opacity: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-12px); }
        }

        /* Estilos Generales de Contenido */
        .section {
            padding: 8rem 2rem;
        }

        .section-white {
            background: var(--color-bg-alt);
        }

        .section-light {
            background: var(--color-bg);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .section-label {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding: 0.4rem 1rem;
            background: rgba(44, 95, 141, 0.08);
            border-radius: 4px;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 2rem;
            letter-spacing: -0.5px;
            color: var(--color-dark);
        }

        .section-intro {
            font-size: 1.35rem;
            line-height: 1.75;
            color: var(--color-dark-light);
            margin-bottom: 4rem;
            font-weight: 400;
        }

        .text {
            font-size: 1.1rem;
            line-height: 1.9;
            margin-bottom: 2rem;
            color: var(--color-dark);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .text strong {
            font-weight: 700;
            color: var(--color-primary);
        }

        .callout {
            padding: 2.5rem;
            background: linear-gradient(135deg, rgba(44, 95, 141, 0.04) 0%, rgba(139, 111, 158, 0.04) 100%);
            border-left: 4px solid var(--color-primary);
            border-radius: var(--radius-sm);
            margin: 3rem 0;
            font-size: 1.15rem;
            line-height: 1.85;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
        }

        .callout.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* VISUALIZATIONS */
        .viz-section {
            padding: 8rem 2rem;
            background: var(--color-bg-alt);
        }

        .viz-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .viz-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-align: center;
            letter-spacing: -1.5px;
            color: var(--color-dark);
        }

        .viz-subtitle {
            font-size: 1.15rem;
            color: var(--color-dark-light);
            text-align: center;
            margin-bottom: 4rem;
            font-weight: 400;
        }

        /* Category Breakdown */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .category-card {
            padding: 2.5rem 2rem;
            background: var(--color-bg);
            border-radius: var(--radius-md);
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
            opacity: 0;
            transform: translateY(20px);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: currentColor;
            opacity: 0;
            transition: var(--transition);
        }

        .category-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .category-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .category-num {
            font-size: 3.5rem;
            font-weight: 900;
            font-family: 'Fraunces', serif;
            margin-bottom: 0.75rem;
            line-height: 1;
        }

        .category-label {
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--color-dark-light);
        }

        /* Timeline - Formato Vertical con Cards */
        #timeline-chart {
            position: relative;
            max-width: 1200px;
            margin: 4rem auto;
            padding: 2rem 0;
        }

        .timeline-container {
            position: relative;
            padding-left: 60px;
        }

        .timeline-line {
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--color-primary) 0%, var(--color-accent) 100%);
        }

        .timeline-event {
            position: relative;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.6s ease;
        }

        .timeline-event.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .timeline-marker {
            position: absolute;
            left: -45px;
            top: 20px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 4px solid;
            box-shadow: 0 0 0 4px rgba(255,255,255,0.8);
            z-index: 2;
        }

        .timeline-marker.anuncio { border-color: var(--cat-anuncio); }
        .timeline-marker.detenciones { border-color: var(--cat-detenciones); }
        .timeline-marker.represion { border-color: var(--cat-represion); }
        .timeline-marker.violencia { border-color: var(--cat-violencia); }
        .timeline-marker.censura { border-color: var(--cat-censura); }

        .timeline-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 2rem;
            box-shadow: var(--shadow-md);
            border-left: 6px solid;
            transition: var(--transition-bounce);
            margin-left: 20px;
        }

        .timeline-card.anuncio { border-left-color: var(--cat-anuncio); }
        .timeline-card.detenciones { border-left-color: var(--cat-detenciones); }
        .timeline-card.represion { border-left-color: var(--cat-represion); }
        .timeline-card.violencia { border-left-color: var(--cat-violencia); }
        .timeline-card.censura { border-left-color: var(--cat-censura); }

        .timeline-card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: var(--shadow-xl);
        }

        .timeline-date {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .timeline-day-badge {
            display: inline-block;
            background: var(--color-bg);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
            color: var(--color-dark);
        }

        .timeline-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--color-dark);
            line-height: 1.4;
        }

        .timeline-location {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.9rem;
            color: var(--color-dark-light);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .timeline-summary {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--color-dark-light);
            margin-bottom: 1rem;
        }

        .timeline-category {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timeline-category.anuncio {
            background: rgba(91, 154, 124, 0.15);
            color: #5B9A7C;
        }

        .timeline-category.detenciones {
            background: rgba(232, 152, 61, 0.15);
            color: #E8983D;
        }

        .timeline-category.represion {
            background: rgba(214, 69, 69, 0.15);
            color: #D64545;
        }

        .timeline-category.violencia {
            background: rgba(139, 0, 0, 0.15);
            color: #8B0000;
        }

        .timeline-category.censura {
            background: rgba(139, 111, 158, 0.15);
            color: #8B6F9E;
        }

        /* Geographic Visualization */
        .geo-viz {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .geo-item {
            padding: 2.5rem 2rem;
            background: var(--color-bg);
            border-radius: var(--radius-md);
            text-align: center;
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(0, 0, 0, 0.04);
        }

        .geo-item.visible {
            opacity: 1;
            transform: scale(1);
        }

        .geo-item:hover {
            transform: scale(1.03);
            box-shadow: var(--shadow-md);
        }

        .geo-label {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: var(--color-dark);
        }

        .geo-count {
            font-size: 2.5rem;
            font-weight: 900;
            font-family: 'Fraunces', serif;
            color: var(--color-primary);
            line-height: 1;
        }

        .geo-dots {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 1.5rem;
            min-height: 60px;
            align-items: center;
        }

        .geo-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--color-primary);
            box-shadow: 0 2px 4px rgba(44, 95, 141, 0.3);
            transition: var(--transition);
        }

        .geo-dot:hover {
            transform: scale(1.3);
        }

        /* Events Table */
        .events-section {
            padding: 8rem 2rem;
            background: var(--color-bg);
        }

        .events-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--color-primary);
            background: transparent;
            color: var(--color-primary);
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--color-primary);
            color: white;
        }

        .events-grid {
            display: grid;
            gap: 1.5rem;
        }

        .event-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border-left: 6px solid var(--color-primary);
            transition: var(--transition-bounce);
        }

        .event-card:hover {
            box-shadow: var(--shadow-xl);
            transform: translateY(-6px) scale(1.01);
        }

        .event-meta {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: var(--color-dark-light);
        }

        .event-date {
            font-weight: 700;
            color: var(--color-primary);
        }

        .event-location {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .event-day {
            background: var(--color-bg);
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .event-title {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--color-dark);
            line-height: 1.4;
        }

        .event-summary {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--color-dark-light);
            margin-bottom: 1rem;
        }

        .event-category {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .category-anuncio {
            background: rgba(91, 154, 124, 0.1);
            color: var(--color-success);
        }

        .category-detenciones {
            background: rgba(232, 152, 61, 0.1);
            color: var(--color-warning);
        }

        .category-represion {
            background: rgba(214, 69, 69, 0.1);
            color: var(--color-danger);
        }

        .category-violencia {
            background: rgba(139, 0, 0, 0.1);
            color: #8B0000;
        }

        .category-censura {
            background: rgba(139, 111, 158, 0.1);
            color: var(--color-accent);
        }

        /* Referencias Section - Formato Bibliogr√°fico APA */
        .bibliografia-container {
            max-width: 900px;
            margin: 3rem auto;
            background: white;
            padding: 3rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
        }

        .bibliografia-item {
            margin-bottom: 1.5rem;
            padding-left: 2.5rem;
            text-indent: -2.5rem;
            line-height: 1.8;
            font-size: 0.95rem;
            color: #333;
        }

        .bibliografia-item a {
            color: var(--color-primary);
            text-decoration: none;
            word-break: break-all;
        }

        .bibliografia-item a:hover {
            text-decoration: underline;
            color: var(--color-accent);
        }

        .sin-referencias {
            text-align: center;
            padding: 3rem;
            color: #888;
            font-style: italic;
        }

        /* Narrativas Section - Comparaci√≥n Oficial vs Realidad */
        .narrativas-section {
            background: var(--color-bg);
        }

        .narrativas-tabs {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .narrativas-tab {
            padding: 1rem 2.5rem;
            background: white;
            border: 2px solid var(--primary-300);
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-700);
            cursor: pointer;
            transition: var(--transition);
        }

        .narrativas-tab:hover {
            background: var(--primary-100);
            border-color: var(--primary-500);
        }

        .narrativas-tab.active {
            background: var(--primary-700);
            color: white;
            border-color: var(--primary-700);
        }

        .comparacion-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .comparacion-card {
            display: grid;
            grid-template-columns: 1fr 80px 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .comparacion-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .narrativa-box {
            background: white;
            padding: 2.5rem;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            transition: var(--transition-bounce);
        }

        .narrativa-box:hover {
            box-shadow: var(--shadow-xl);
            transform: translateY(-4px);
        }

        .narrativa-box.oficial {
            border-left: 6px solid #98A2B3;
        }

        .narrativa-box.realidad {
            border-left: 6px solid var(--cat-represion);
        }

        .narrativa-tag {
            display: inline-block;
            padding: 0.5rem 1.2rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
        }

        .narrativa-tag.oficial {
            background: #E5E7EB;
            color: #374151;
        }

        .narrativa-tag.realidad {
            background: #FEE2E2;
            color: #991B1B;
        }

        .narrativa-titulo {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--color-dark);
            line-height: 1.3;
        }

        .narrativa-texto {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--color-dark-light);
            margin-bottom: 1.5rem;
        }

        .narrativa-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.85rem;
            color: #6B7280;
            border-top: 1px solid #E5E7EB;
            padding-top: 1rem;
            margin-top: 1rem;
        }

        .narrativa-meta-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .narrativa-fuente {
            font-size: 0.85rem;
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .narrativa-fuente:hover {
            text-decoration: underline;
            color: var(--color-accent);
        }

        .violaciones-lista {
            list-style: none;
            margin-top: 1rem;
            padding: 0;
        }

        .violaciones-lista li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: var(--color-dark-light);
        }

        .violaciones-lista li:before {
            content: "‚ö†";
            position: absolute;
            left: 0;
            color: var(--color-danger);
        }

        .comparacion-timeline {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .fecha-circulo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--primary-700));
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            box-shadow: 0 0 0 8px rgba(16, 24, 40, 0.1);
            z-index: 2;
        }

        .fecha-dia {
            font-size: 0.7rem;
            opacity: 0.9;
        }

        .fecha-numero {
            font-size: 1.1rem;
        }

        .comparacion-flecha {
            margin-top: 1rem;
            font-size: 1.5rem;
            color: var(--primary-300);
        }

        /* Responsive */
        @media (max-width: 968px) {
            .comparacion-card {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .comparacion-timeline {
                flex-direction: row;
                margin: 1rem 0;
            }

            .comparacion-flecha {
                transform: rotate(90deg);
                margin: 0 1rem;
            }

            .narrativas-tabs {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Footer */
        .footer {
            background: var(--color-dark);
            color: white;
            padding: 5rem 2rem 3rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 4rem;
            margin-bottom: 3rem;
        }

        .footer-section h3 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .footer-section p,
        .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.8;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 3rem;
            }

            .hero-stats {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .stat-num {
                font-size: 3rem;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .nav-links {
                gap: 1.5rem;
            }

            .category-grid {
                grid-template-columns: 1fr;
            }

            .timeline-container {
                padding-left: 40px;
            }

            .timeline-line {
                left: 20px;
            }

            .timeline-marker {
                left: -35px;
                width: 25px;
                height: 25px;
            }

            .timeline-card {
                margin-left: 10px;
                padding: 1.5rem;
            }

            .timeline-title {
                font-size: 1.1rem;
            }

            .timeline-summary {
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>

    <nav class="nav" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">Observatorio DDHH</div>
            <div class="nav-links">
                <a href="#contexto" class="nav-link">Contexto</a>
                <a href="#visualizaciones" class="nav-link">Visualizaciones</a>
                <a href="#eventos" class="nav-link">Eventos</a>
                <a href="#narrativas" class="nav-link">Narrativas</a>
                <a href="#metodologia" class="nav-link">Metodolog√≠a</a>
                <a href="#referencias" class="nav-link">Referencias</a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <span class="hero-label">Observatorio de Derechos Humanos</span>
            <h1 class="hero-title">Paro Nacional Ecuador 2025</h1>
            <p class="hero-desc">
                Documentaci√≥n rigurosa y visualizaci√≥n interactiva de vulneraciones a derechos humanos
                durante el Paro Nacional convocado por la CONAIE en Ecuador.
            </p>
            <div class="hero-stats">
                <div class="stat">
                    <div class="stat-num">3</div>
                    <div class="stat-label">Personas Fallecidas</div>
                </div>
                <div class="stat">
                    <div class="stat-num">391</div>
                    <div class="stat-label">Vulneraciones a DDHH</div>
                </div>
                <div class="stat">
                    <div class="stat-num">206</div>
                    <div class="stat-label">Detenciones Documentadas</div>
                </div>
                <div class="stat">
                    <div class="stat-num">473</div>
                    <div class="stat-label">Personas Heridas</div>
                </div>
                <div class="stat">
                    <div class="stat-num">16</div>
                    <div class="stat-label">Desapariciones de Corta Duraci√≥n</div>
                </div>
            </div>
        </div>
        <div class="scroll-hint" onclick="document.getElementById('contexto').scrollIntoView({behavior: 'smooth'})">
            Desplazar ‚Üì
        </div>
    </section>

    <section class="section section-white" id="contexto">
        <div class="container">
            <span class="section-label">Plataforma para los Derechos Humanos EC</span>
            <h2 class="section-title">Sobre la Plataforma</h2>

            <p class="text">
                La <strong>Plataforma para los Derechos Humanos EC</strong> es un espacio construido colectivamente por
                <strong>Diversa</strong> y <strong>CEDHU</strong>, dos organizaciones que buscan difundir informaci√≥n relacionada
                con la permanente vulneraci√≥n de derechos humanos registrada en Ecuador. Inicialmente, surgi√≥ con el prop√≥sito de
                recoger los sucesos m√°s relevantes del paro nacional registrados entre septiembre y octubre del 2025.
            </p>

            <p class="text">
                Sin embargo, en el contexto actual de violencia e inseguridad pautada por el crimen organizado, la falta de
                oportunidades para la poblaci√≥n y la ausencia estatal, el pa√≠s experimenta un marcado giro hacia el autoritarismo,
                y la consecuente p√©rdida de los valores y principios democr√°ticos como la libertad, igualdad, justicia y solidaridad.
            </p>

            <div class="callout">
                <strong>Contexto cr√≠tico:</strong> Siguiendo una tendencia regional, la narrativa del gobierno central apunta hacia
                la polarizaci√≥n, a trav√©s de argumentos que tienden a ser discriminatorios, racistas, xen√≥fobos. Esta narrativa
                apunta a un enemigo interno: esa persona, comunidad, etnia, pueblo, grupo social u organizaci√≥n que es f√°cilmente
                transformada en criminal por exigir el cumplimiento de sus derechos consagrados en la Constituci√≥n del Ecuador.
            </div>

            <p class="text">
                En un escenario donde la democracia sufri√≥ un severo deterioro, afloran diversos s√≠ntomas de problem√°ticas de orden
                estructural que no han sido resueltas: debilitamiento de la institucionalidad, crecientes restricciones del espacio
                c√≠vico, incremento de la influencia de grupos delictivos, permanentes tensiones pol√≠ticas y sociales, y p√©rdida de
                confianza de los ciudadanos hacia los sistemas llamados a garantizar derechos.
            </p>

            <p class="text">
                Durante el 2025 se aprobaron varias leyes en la Asamblea Nacional, destacando la <strong>Ley Org√°nica de Transparencia
                Social y su Reglamento</strong>, las que buscan intimidar y callar la voz de la sociedad civil, llegando al extremo
                de prohibir que organizaciones que trabajan en territorios afectados por actividades mineras contin√∫en acompa√±ando el
                leg√≠timo derecho a la resistencia y al acceso a la justicia de las comunidades.
            </p>
        </div>
    </section>

    <section class="viz-section" id="visualizaciones">
        <div class="viz-container">
            <h2 class="viz-title">Visualizaciones de Datos</h2>
            <p class="viz-subtitle">An√°lisis interactivo de eventos documentados</p>

            <h3 style="font-size: 2rem; margin-top: 2rem; margin-bottom: 2rem; text-align: center;">
                Cronolog√≠a de Eventos
            </h3>
            <div id="timeline-chart"></div>

            <h3 style="font-size: 2rem; margin-top: 6rem; margin-bottom: 2rem; text-align: center;">
                Distribuci√≥n Geogr√°fica
            </h3>
            <div class="geo-viz" id="geoViz"></div>
        </div>
    </section>

    <section class="events-section" id="eventos">
        <div class="events-container">
            <h2 class="viz-title">Eventos Documentados</h2>
            <p class="viz-subtitle">Registro cronol√≥gico detallado de cada evento</p>

            <div class="filters" id="filters">
                <button class="filter-btn active" data-category="all">Todos</button>
                <button class="filter-btn" data-category="anuncio">Anuncios</button>
                <button class="filter-btn" data-category="detenciones">Detenciones</button>
                <button class="filter-btn" data-category="represion">Represi√≥n</button>
                <button class="filter-btn" data-category="violencia">Violencia</button>
                <button class="filter-btn" data-category="censura">Censura</button>
            </div>

            <div class="events-grid" id="eventsGrid"></div>
        </div>
    </section>

    <!-- Secci√≥n de Narrativas: Oficial vs Realidad -->
    <section class="section narrativas-section" id="narrativas">
        <div class="container">
            <span class="section-label">An√°lisis Comparativo</span>
            <h2 class="section-title">Narrativas: Oficial vs Realidad Documentada</h2>

            <p class="text" style="max-width: 800px; margin: 0 auto 3rem; text-align: center;">
                Comparaci√≥n entre el discurso oficial de las Fuerzas Armadas y Polic√≠a Nacional,
                versus la realidad documentada por organizaciones de derechos humanos durante el paro nacional.
            </p>

            <!-- Tabs de navegaci√≥n -->
            <div class="narrativas-tabs">
                <button class="narrativas-tab active" data-view="linea-tiempo">
                    L√≠nea de Tiempo
                </button>
                <button class="narrativas-tab" data-view="narrativas">
                    Comparaci√≥n Narrativas
                </button>
            </div>

            <!-- Contenedor de comparaciones -->
            <div class="comparacion-container" id="narrativasContainer">
                <!-- Se llena din√°micamente con JavaScript -->
            </div>
        </div>
    </section>

    <section class="section section-white" id="metodologia">
        <div class="container">
            <span class="section-label">Metodolog√≠a</span>
            <h2 class="section-title">Metodolog√≠a de levantamiento de informaci√≥n durante el paro nacional 2025</h2>

            <p class="text">
                En cuanto a la metodolog√≠a planteada para la construcci√≥n de la l√≠nea de tiempo, se consider√≥ oportuno recoger
                diferentes perspectivas de las movilizaciones y protestas registradas en varias provincias del pa√≠s. El corte
                temporal del levantamiento de informaci√≥n inici√≥ el <strong>22 de septiembre y concluy√≥ el 24 de octubre de 2025</strong>,
                es decir, la l√≠nea de tiempo cubre un total de 33 d√≠as.
            </p>

            <p class="text">
                El m√©todo utilizado para el levantamiento de informaci√≥n consisti√≥ en la <strong>revisi√≥n de fuentes secundarias
                virtuales</strong>, entre los sitios considerados para acceder la informaci√≥n se encuentran las p√°ginas oficiales
                y los perfiles en redes sociales de varias instituciones p√∫blicas, especialmente aquellas que mantuvieron un rol
                activo durante el corte temporal de la investigaci√≥n.
            </p>

            <div class="callout">
                <strong>Fuentes consultadas:</strong> Se analizaron y contrastaron los reportajes y art√≠culos publicados en medios
                de comunicaci√≥n tradicionales y alternativos. Adem√°s, se revisaron a profundidad los datos disponibles acerca de
                vulneraciones de derechos elaborados por organizaciones de la sociedad civil. Se recogieron los pronunciamientos
                de organismos internacionales producidos durante el paro nacional.
            </div>

            <p class="text">
                La revisi√≥n de fuentes secundarias disponibles durante el paro permiti√≥ tener una visi√≥n mucho m√°s amplia de lo
                que suced√≠a, m√°s all√° de la narrativa oficial, la misma que fue replicada a trav√©s de los medios de comunicaci√≥n
                m√°s tradicionales. Al realizar una revisi√≥n sistem√°tica de las fuentes secundarias tambi√©n se identificaron las
                narrativas que el gobierno intentaba posicionar.
            </p>

            <p class="text">
                Durante la b√∫squeda de informaci√≥n para alimentar la l√≠nea de tiempo, result√≥ interesante observar c√≥mo el gobierno
                de Noboa propuso al menos seis nuevas leyes inscritas en el √°mbito de lo "econ√≥mico urgente" hasta noviembre de 2025,
                las cuales fueron aprobadas mayoritariamente en la Asamblea Nacional. Al menos dos de las seis leyes fueron reconocidas
                como inconstitucionales por la Corte Constitucional: <strong>Ley Org√°nica de Innovaci√≥n Fortalecimiento de la Gesti√≥n
                P√∫blica</strong> y la <strong>Ley Org√°nica de Integridad P√∫blica</strong>.
            </p>

            <div class="callout">
                <strong>Colaboraci√≥n institucional:</strong> La Comisi√≥n Ecum√©nica de Derechos Humanos (CEDHU), primera organizaci√≥n
                de derechos humanos constituida en Ecuador, suscribi√≥ una alianza con Diversa, una organizaci√≥n que ofrece servicios
                de datos e inteligencia artificial (IA) centrada en las personas. Esta colaboraci√≥n busca integrar el uso de la
                inteligencia artificial y el an√°lisis de datos para potenciar la protecci√≥n de los derechos humanos en Ecuador.
            </div>
        </div>
    </section>

    <section class="section section-white" id="referencias">
        <div class="container">
            <span class="section-label">Fuentes Consultadas</span>
            <h2 class="section-title">Referencias Bibliogr√°ficas</h2>
            <p class="text" style="text-align: center; max-width: 800px; margin: 0 auto 2rem;">
                Todas las fuentes consultadas para la documentaci√≥n de eventos del Paro Nacional 2025,
                organizadas en formato APA.
            </p>
            <div id="bibliografiaContainer" class="bibliografia-container"></div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Observatorio DDHH Ecuador</h3>
                <p>
                    Plataforma de documentaci√≥n y an√°lisis de vulneraciones a derechos humanos
                    durante el Paro Nacional Ecuador 2025.
                </p>
            </div>
            <div class="footer-section">
                <h3>Organizaciones</h3>
                <a href="https://cedhu.org" target="_blank">CEDHU</a>
                <a href="#">Diversa Studio</a>
            </div>
            <div class="footer-section">
                <h3>Recursos</h3>
                <a href="#metodologia">Metodolog√≠a</a>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 Observatorio DDHH Ecuador. Licencia Creative Commons BY-SA 4.0
        </div>
    </footer>

    <script>
        // Cargar datos procesados
        let datosApp = null;
        let referenciasData = null;
        let narrativasData = null;

        // Cargar el archivo JSON de datos
        fetch('datos_procesados.json')
            .then(response => response.json())
            .then(data => {
                datosApp = data;
                return fetch('referencias.json');
            })
            .then(response => response.json())
            .then(data => {
                referenciasData = data;
                return fetch('narrativas_procesadas.json');
            })
            .then(response => response.json())
            .then(data => {
                narrativasData = data;
                inicializarApp();
            })
            .catch(error => {
                console.error('Error cargando datos:', error);
                // Fallback: mostrar mensaje de error
                document.body.innerHTML += '<div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); text-align: center; max-width: 500px;"><h2 style="color: #D64545; margin-bottom: 1rem;">Error al cargar datos</h2><p>No se pudo cargar los archivos de datos. Aseg√∫rate de que datos_procesados.json, referencias.json y narrativas_procesadas.json existen en el mismo directorio.</p></div>';
            });

        function inicializarApp() {
            // Crear visualizaciones
            crearTimelineViz();
            crearGeoViz();
            renderizarEventos();
            renderizarReferencias();
            renderizarNarrativas();

            // Scroll animations
            setupScrollAnimations();
            setupNavbar();
            setupFilters();
            setupNarrativasTabs();
        }

        function crearTimelineViz() {
            const container = document.getElementById('timeline-chart');
            const eventos = datosApp.eventos;

            // Crear contenedor principal con l√≠nea vertical
            const timelineHTML = `
                <div class="timeline-container">
                    <div class="timeline-line"></div>
                    ${eventos.map((evento, index) => `
                        <div class="timeline-event" style="animation-delay: ${index * 0.1}s">
                            <div class="timeline-marker ${evento.category}"></div>
                            <div class="timeline-card ${evento.category}">
                                <div>
                                    <span class="timeline-date">${formatearFecha(evento.date)}</span>
                                    <span class="timeline-day-badge">D√≠a ${evento.day}</span>
                                </div>
                                <div class="timeline-location">üìç ${evento.location}</div>
                                <h3 class="timeline-title">${evento.title}</h3>
                                <p class="timeline-summary">${evento.summary}</p>
                                <span class="timeline-category ${evento.category}">
                                    ${evento.category}
                                </span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            container.innerHTML = timelineHTML;

            // Activar animaciones al hacer scroll
            setTimeout(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.timeline-event').forEach(el => {
                    observer.observe(el);
                });
            }, 100);
        }

        function formatearFecha(fecha) {
            // Convertir fecha YYYY-MM-DD o YYYY/MM/DD a formato legible
            const meses = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
            let partes;

            if (fecha.includes('/')) {
                partes = fecha.split('/');
            } else {
                partes = fecha.split('-');
            }

            const mes = meses[parseInt(partes[1]) - 1];
            const dia = parseInt(partes[2]);

            return `${dia} ${mes}`;
        }

        function crearGeoViz() {
            const container = document.getElementById('geoViz');
            const ubicaciones = datosApp.estadisticas.ubicaciones;

            // Ordenar por cantidad de eventos (mayor a menor)
            const ubicacionesOrdenadas = Object.entries(ubicaciones)
                .sort(([, a], [, b]) => b - a);

            // Encontrar el m√°ximo para calcular porcentajes
            const maxEventos = Math.max(...Object.values(ubicaciones));

            ubicacionesOrdenadas.forEach(([lugar, count], index) => {
                const item = document.createElement('div');
                item.className = 'geo-item';
                item.style.animationDelay = `${index * 0.1}s`;

                // Calcular porcentaje para barra
                const porcentaje = (count / maxEventos) * 100;

                // Elegir color basado en intensidad
                let colorIntensidad = '#5B9A7C'; // Verde suave
                if (count > 10) colorIntensidad = '#E8983D'; // Naranja
                if (count > 12) colorIntensidad = '#D64545'; // Rojo

                item.innerHTML = `
                    <div class="geo-label">${lugar}</div>
                    <div class="geo-count" style="color: ${colorIntensidad}">${count}</div>
                    <div style="width: 100%; background: #f0f0f0; height: 12px; border-radius: 6px; margin-top: 15px; overflow: hidden;">
                        <div style="width: ${porcentaje}%; height: 100%; background: ${colorIntensidad}; border-radius: 6px; transition: width 1s ease;"></div>
                    </div>
                    <div style="margin-top: 8px; font-size: 0.85rem; color: #888; text-align: center;">
                        ${((count / datosApp.estadisticas.total_eventos) * 100).toFixed(1)}% del total
                    </div>
                `;

                container.appendChild(item);
            });
        }

        function renderizarEventos(filtroCategoria = 'all') {
            const container = document.getElementById('eventsGrid');
            container.innerHTML = '';

            const eventosFiltrados = filtroCategoria === 'all'
                ? datosApp.eventos
                : datosApp.eventos.filter(e => e.category === filtroCategoria);

            eventosFiltrados.forEach(evento => {
                const card = document.createElement('div');
                card.className = 'event-card';

                card.innerHTML = `
                    <div class="event-meta">
                        <span class="event-date">üìÖ ${evento.date}</span>
                        <span class="event-location">üìç ${evento.location}</span>
                        <span class="event-day">D√≠a ${evento.day}</span>
                    </div>
                    <h3 class="event-title">${evento.title}</h3>
                    <p class="event-summary">${evento.summary}</p>
                    <span class="event-category category-${evento.category}">
                        ${evento.category}
                    </span>
                `;

                container.appendChild(card);
            });
        }

        function renderizarReferencias() {
            const container = document.getElementById('bibliografiaContainer');

            if (!referenciasData || !referenciasData.referencias || referenciasData.referencias.length === 0) {
                container.innerHTML = '<div class="sin-referencias">No hay referencias disponibles</div>';
                return;
            }

            const referencias = referenciasData.referencias;

            // Agrupar y eliminar duplicados por URL
            const refsUnicas = new Map();

            referencias.forEach(ref => {
                // Extraer URLs de fuente, fuente_primaria y link
                let urls = [];

                if (ref.fuente && ref.fuente.includes('http')) {
                    const matches = ref.fuente.match(/https?:\/\/[^\s,\n]+/g);
                    if (matches) urls.push(...matches);
                }

                if (ref.fuente_primaria && ref.fuente_primaria.includes('http')) {
                    const matches = ref.fuente_primaria.match(/https?:\/\/[^\s,\n]+/g);
                    if (matches) urls.push(...matches);
                }

                if (ref.link && ref.link.includes('http')) {
                    const matches = ref.link.match(/https?:\/\/[^\s,\n]+/g);
                    if (matches) urls.push(...matches);
                }

                // Agregar cada URL √∫nica
                urls.forEach(url => {
                    url = url.replace(/[.,;:)}\]]+$/, ''); // Limpiar signos al final
                    if (!refsUnicas.has(url)) {
                        refsUnicas.set(url, {
                            url: url,
                            fecha: ref.fecha_evento
                        });
                    }
                });
            });

            // Ordenar alfab√©ticamente por dominio
            const refsOrdenadas = Array.from(refsUnicas.values()).sort((a, b) => {
                const domainA = a.url.replace(/https?:\/\//, '').split('/')[0];
                const domainB = b.url.replace(/https?:\/\//, '').split('/')[0];
                return domainA.localeCompare(domainB);
            });

            // Generar bibliograf√≠a en formato APA
            refsOrdenadas.forEach((ref, index) => {
                const item = document.createElement('div');
                item.className = 'bibliografia-item';

                // Extraer informaci√≥n del URL para formato APA
                const urlObj = new URL(ref.url);
                const dominio = urlObj.hostname.replace('www.', '');
                const a√±o = ref.fecha ? ref.fecha.split('-')[0] : '2025';

                // Formatear en estilo APA simplificado
                const citaAPA = `${dominio.charAt(0).toUpperCase() + dominio.slice(0, dominio.indexOf('.'))}. (${a√±o}). Recuperado de <a href="${ref.url}" target="_blank" rel="noopener">${ref.url}</a>`;

                item.innerHTML = citaAPA;
                container.appendChild(item);
            });
        }

        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.text, .callout, .counter-item, .category-card, .geo-item').forEach(el => {
                observer.observe(el);
            });
        }

        function setupNavbar() {
            const navbar = document.getElementById('navbar');
            const progressBar = document.getElementById('progressBar');

            window.addEventListener('scroll', () => {
                // Navbar visibility
                if (window.scrollY > 100) {
                    navbar.classList.add('visible');
                } else {
                    navbar.classList.remove('visible');
                }

                // Progress bar
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                progressBar.style.width = scrolled + '%';
            });

            // Smooth scroll for nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
                });
            });
        }

        function setupFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');

            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update active state
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    // Filter events
                    const category = btn.dataset.category;
                    renderizarEventos(category);
                });
            });
        }

        function renderizarNarrativas(view = 'narrativas') {
            const container = document.getElementById('narrativasContainer');

            if (!narrativasData || !narrativasData.comparaciones) {
                container.innerHTML = '<p style="text-align: center; padding: 3rem; color: #888;">No hay narrativas disponibles.</p>';
                return;
            }

            const comparaciones = narrativasData.comparaciones;

            if (comparaciones.length === 0) {
                container.innerHTML = '<p style="text-align: center; padding: 3rem; color: #888;">No se encontraron comparaciones de narrativas.</p>';
                return;
            }

            const html = comparaciones.map((comp, index) => `
                <div class="comparacion-card" style="animation-delay: ${index * 0.1}s">
                    <!-- Narrativa Oficial (Izquierda) -->
                    <div class="narrativa-box oficial">
                        <span class="narrativa-tag oficial">GOBIERNO</span>
                        <h3 class="narrativa-titulo">
                            Medida contra criminalidad
                        </h3>
                        <p class="narrativa-texto">
                            ${comp.narrativa_oficial.idea_fuerza}
                        </p>
                        <div class="narrativa-meta">
                            <div class="narrativa-meta-item">
                                <strong>Fuente:</strong> ${comp.narrativa_oficial.cuenta}
                            </div>
                        </div>
                        ${comp.narrativa_oficial.fuente ? `
                            <a href="${comp.narrativa_oficial.fuente}" target="_blank" class="narrativa-fuente">
                                üîó Ver fuente
                            </a>
                        ` : ''}
                    </div>

                    <!-- Timeline central -->
                    <div class="comparacion-timeline">
                        <div class="fecha-circulo">
                            <div class="fecha-dia">${formatearFecha(comp.fecha).split(' ')[0]}</div>
                            <div class="fecha-numero">${comp.dia.toString().padStart(2, '0')}/12</div>
                        </div>
                        <div class="comparacion-flecha">
                            ‚ñ∂
                        </div>
                    </div>

                    <!-- Realidad Documentada (Derecha) -->
                    <div class="narrativa-box realidad">
                        <span class="narrativa-tag realidad">REALIDAD</span>
                        <h3 class="narrativa-titulo">
                            ${comp.realidad_documentada.titulo}
                        </h3>
                        <p class="narrativa-texto">
                            ${comp.realidad_documentada.resumen.substring(0, 250)}...
                        </p>
                        ${comp.realidad_documentada.violaciones && comp.realidad_documentada.violaciones.length > 0 ? `
                            <div class="narrativa-meta">
                                <strong>‚ö† VIOLACIONES:</strong>
                            </div>
                            <ul class="violaciones-lista">
                                ${comp.realidad_documentada.violaciones.slice(0, 3).map(v => `<li>${v}</li>`).join('')}
                            </ul>
                        ` : ''}
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;

            // Trigger scroll animations
            setTimeout(() => {
                const cards = container.querySelectorAll('.comparacion-card');
                cards.forEach(card => card.classList.add('visible'));
            }, 100);
        }

        function setupNarrativasTabs() {
            const tabs = document.querySelectorAll('.narrativas-tab');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active state
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // Get view type
                    const view = tab.dataset.view;

                    // Render appropriate view
                    if (view === 'linea-tiempo') {
                        renderizarNarrativasTimeline();
                    } else {
                        renderizarNarrativas('narrativas');
                    }
                });
            });
        }

        function renderizarNarrativasTimeline() {
            const container = document.getElementById('narrativasContainer');

            if (!narrativasData || !narrativasData.comparaciones) {
                container.innerHTML = '<p style="text-align: center; padding: 3rem; color: #888;">No hay datos disponibles.</p>';
                return;
            }

            // Agrupar por fecha
            const porFecha = {};
            narrativasData.comparaciones.forEach(comp => {
                if (!porFecha[comp.fecha]) {
                    porFecha[comp.fecha] = {
                        fecha: comp.fecha,
                        dia: comp.dia,
                        oficial: [],
                        realidad: []
                    };
                }
                porFecha[comp.fecha].oficial.push(comp.narrativa_oficial);
                porFecha[comp.fecha].realidad.push(comp.realidad_documentada);
            });

            const html = Object.values(porFecha).map((dia, index) => `
                <div class="comparacion-card" style="animation-delay: ${index * 0.1}s">
                    <div class="narrativa-box oficial">
                        <span class="narrativa-tag oficial">D√çA ${dia.dia} - OFICIAL</span>
                        <h3 class="narrativa-titulo">${formatearFecha(dia.fecha)}</h3>
                        <p class="narrativa-texto">
                            ${dia.oficial[0].idea_fuerza}
                        </p>
                        <div class="narrativa-meta">
                            <div class="narrativa-meta-item">
                                <strong>${dia.oficial.length}</strong> narrativas oficiales
                            </div>
                        </div>
                    </div>

                    <div class="comparacion-timeline">
                        <div class="fecha-circulo">
                            <div class="fecha-dia">${formatearFecha(dia.fecha).split(' ')[0]}</div>
                            <div class="fecha-numero">${dia.dia.toString().padStart(2, '0')}/12</div>
                        </div>
                        <div class="comparacion-flecha">‚ñ∂</div>
                    </div>

                    <div class="narrativa-box realidad">
                        <span class="narrativa-tag realidad">D√çA ${dia.dia} - REALIDAD</span>
                        <h3 class="narrativa-titulo">${dia.realidad[0].titulo}</h3>
                        <p class="narrativa-texto">
                            ${dia.realidad[0].resumen.substring(0, 200)}...
                        </p>
                        <div class="narrativa-meta">
                            <div class="narrativa-meta-item">
                                <strong>${dia.realidad.length}</strong> eventos documentados
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;

            setTimeout(() => {
                const cards = container.querySelectorAll('.comparacion-card');
                cards.forEach(card => card.classList.add('visible'));
            }, 100);
        }
    </script>
</body>
</html>
